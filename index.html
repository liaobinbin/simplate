<html>

<head>
    <title>数据绑定</title>
    <script type="text/javascript" src="lib/parser.js" ></script>
    <script type="text/javascript" src="lib/binder.data.js" ></script>
    <script type="text/javascript" src="lib/binder.array.js" ></script>
    
    
    <style>
        .color-red {

            color: red;
        }

        .color-blue {
            color: blue;
        }
    </style>
</head>

<body>


    <div id="container">
        version:v{version}
        <div class="{dynamicClassName} {name}">className:{dynamicClassName} <button onclick="changeClassName()">Change Class</button></div>
        <div>
            <span style="font-size:{fontSize}px;width:100px;display:inline-block">
            Date:{systemTime} 
            </span>

            <strong>
            {desc}</strong>
        </div>

        <div>
            <div repeater="list">
             {index} {name} <button style="margin-left:20px" onclick="deleteItem({index})">删除</button>
            </div>
        </div>
        <button onclick="addItem()">添加元素</button>

        <div>
            name: {info.name} <button onclick="setName()">set name</button>
            <br> author:{info.author}
        </div>

    </div>

    </div>


    <script>
        // 支持属性和innertext 的动态数据绑定
        // 下一步将支持 array 
       


       

       







        //test
        function changeClassName() {
            if (source.dynamicClassName === "color-red") {
                source.dynamicClassName = "color-blue"
            } else {
                source.dynamicClassName = "color-red"
            }
        }

        function localChange(index){
            source.list[index].dynamicClassName='local-changed';
        }
        function setName(){
            source.info.name="张三"
        }
        function addItem(){
            source.list.insertAt({name:"ggooooooo"});
        }

        function deleteItem(index){
            source.list.deleteIn(index);
        }

        setInterval(() => source.systemTime = new Date().toLocaleTimeString(), 1000);

        var source = {
            list:[
                {
                    name:'Zh san',index:0
                },{
                    name:'Lii s',index:1
                },{
                    name:"Wang er",index:2
                }
            ],
            fontSize: 12,
            info: {
                name: "simplate",
                author: "xiao mao"
            },
            desc: "Super simple template framework", systemTime: new Date().toLocaleTimeString(), dynamicClassName: "color-red", message: "world", name: "cat", templateName: "Simplate", version: "1.0.1"
        };
        var vm = new SimpleTemplateEngine(document.querySelector("#container"), source);
    </script>

</body>

</html>